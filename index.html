<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width, initial-scale=1" /> <title>caubdns</title> <style> body { background-color: black; color: white; font-family: monospace; font-size: 18px; margin: 40px } a { color: cyan } .list { line-height: 2 } .border { border: 2px solid white; padding: 10px } </style> </head> <body> <h1>caubdns editor</h1> <input id="meteredToggle" type="checkbox" checked>enable metered (update blocker)</input> <br> <input id="dnsEnabled" type="checkbox">edit dns</input> <br> <input type="text" id="dns1" placeholder="Enter IP..." /> <br> <input type="text" id="dns2" placeholder="Enter IP..." /> <br> <input type="text" id="dns3" placeholder="Enter IP..." /> <br> <input type="text" id="dns4" placeholder="Enter IP..." /> <br> <br> <input id="proxyEnabled" type="checkbox">edit proxy</input> <br> ftp proxy <input type="text" id="ftpProxy" placeholder="socks4://localhost" /><input value="1080" type="number" id="ftpProxyPort"></input> <br> HTTP proxy <input type="text" id="httpProxy" placeholder="socks4://localhost" /><input value="1080" type="number" id="httpProxyPort"></input> <br> secure HTTPS proxy <input type="text" id="secureHttpProxy" placeholder="socks4://localhost" /><input value="1080" type="number" id="secureHttpProxyPort"></input> <br> socks host <input type="text" id="socks" placeholder="localhost" /><input value="1080" type="number" id="socksProxyPort"></input> <br> domains to exclude as json array <input type="text" value="[]" id="excludeDomains" /> <br> example: <code>["*.com", "google.com"]</code> <h1>Instructions</h1> <div class="list"> Edit the settings above<br> Go to chrome://network#state%3Cbr%3E%20Scroll%20to%20%22Favourite%20Networks%22%3Cbr%3E%20Find%20the%20wifi%20network%20that%20you%20are%20currently%20connected%20to%3Cbr%3E%20Click%20the%20+%20next%20to%20the%20wifi%20name%3Cbr%3E%20Copy%20all%20the%20data%20that%20appears%20(the%20{}%20curly%20braces)%3Cbr%3E%20Paste%20the%20data%20into%20the%20box%20below%20and%20press%20the%20generate%20button%3Cbr%3E%20%3C/div%3E%20%3Cbr%3E%20%3Cinput%20class=%22inputData%22%20placeholder=%22read%20instructions%22%20/%3E%20%3Cdiv%20id=%22extraInputs%22%3E%3C/div%3E%20%3Cbutton%20onclick=%22addInput()%22%3E+%3C/button%3E%20%3Cbutton%20onclick=%22removeInput()%22%3E-%3C/button%3E%20%3Cbr%3E%20%3Cbutton%20onclick=%22gen()%22%3Egenerate%20and%20download%20file%3C/button%3E%20%3Cbr%3E%20%3Ch1%3EImporting%20the%20ONC%20file%3C/h1%3E%20%3Cdiv%20class=%22list%22%3E%20Once%20you%20have%20downloaded%20the%20file,%20go%20to%20chrome://network#general%3Cbr%3E%20Scroll%20to%20the%20bottom%20and%20click%20%22Import%20ONC%22%3Cbr%3E%20Open%20the%20downloaded%20file,%20it%20should%20say%20%22Networks%20imported:%201%22%3Cbr%3E%20Your%20network%20should%20be%20configured%20now.%20%3C/div%3E%20%3Cscript%3E%20let%20extraInputs%20=%20document.querySelector(%22#extraInputs%22)%20function%20addInput(){%20extraInputs.innerHTML%20+=%20%60%3Cinput%20type=%22text%22%20class=%22inputData%22%20/%3E%60%20}%20function%20removeInput(){%20if(extraInputs.lastChild)%20extraInputs.lastChild.remove()%20}%20function%20gen()%20{%20let%20inputDataElements%20=%20document.querySelectorAll(%22.inputData%22)%20let%20onc%20=%20{%20Type:%20%22UnencryptedConfiguration%22,%20NetworkConfigurations:%20[]%20};%20inputDataElements.forEach(inputDataElement%20=%3E%20{%20try%20{%20let%20network%20=%20JSON.parse(inputDataElement.value);%20if%20(!network.GUID%20||%20!network.Name%20||%20!network.WiFi)%20throw%20new%20Error();%20let%20configuration%20=%20{%20GUID:%20network.GUID,%20Metered:%20document.querySelector(%22#meteredToggle%22).checked,%20Name:%20network.Name,%20Type:%20%22WiFi%22,%20WiFi:%20{%20AutoConnect:%20true,%20SSID:%20network.Name,%20Security:%20%22None%22,%20},%20}%20if(document.querySelector(%22#dnsEnabled%22).checked){%20let%20nameServers%20=%20[];%20[%22#dns1%22,%20%22#dns2%22,%20%22#dns3%22,%20%22#dns4%22].forEach(dnsSelector%20=%3E%20{%20let%20element%20=%20document.querySelector(dnsSelector)%20nameServers.push(element.value%20===%20%22%22%20?%20%220.0.0.0%22%20:%20element.value)%20})%20configuration.NameServersConfigType%20=%20%22Static%22%20configuration.StaticIPConfig%20=%20{%20NameServers:%20nameServers%20}%20}%20else%20{%20configuration.NameServersConfigType%20=%20%22DHCP%22%20}%20if(document.querySelector(%22#proxyEnabled%22).checked){%20//parse%20json%20//return%20error%20if%20failed%20let%20parsedExcludeList%20try%20{%20parsedExcludeList%20=%20JSON.parse(document.querySelector(%22#excludeDomains%22).value)%20}%20catch%20(e){%20alert(%22failed%20to%20parse%20exclude%20domains%20list%20for%20proxy%22)%20}%20if(parsedExcludeList%20===%20undefined){%20throw%20new%20Error()%20}%20configuration.ProxySettings%20=%20{%20ExcludeDomains:%20parsedExcludeList,%20Manual:%20{%20FTPProxy:%20{%20Host:%20document.querySelector(%22#ftpProxy%22).value,%20Port:%20parseInt(document.querySelector(%22#ftpProxyPort%22).value)%20},%20HTTPProxy:%20{%20Host:%20document.querySelector(%22#httpProxy%22).value,%20Port:%20parseInt(document.querySelector(%22#httpProxyPort%22).value)%20},%20SOCKS:%20{%20Host:%20document.querySelector(%22#socks%22).value,%20Port:%20parseInt(document.querySelector(%22#socksProxyPort%22).value)%20},%20SecureHTTPProxy:%20{%20Host:%20document.querySelector(%22#secureHttpProxy%22).value,%20Port:%20parseInt(document.querySelector(%22#secureHttpProxyPort%22).value)%20}%20},%20Type:%20%22Manual%22%20}%20}%20else%20{%20configuration.ProxySettings%20=%20{%20Type:%20%22Direct%22%20}%20}%20onc.NetworkConfigurations.push(configuration);%20inputDataElement.style.borderColor%20=%20%22lime%22;%20}%20catch%20(error)%20{%20console.error(error);%20inputDataElement.style.borderColor%20=%20%22red%22;%20}%20})%20if%20(onc.NetworkConfigurations[0])%20download(onc);%20}%20function%20download(object,%20fileName)%20{%20let%20link%20=%20document.createElement(%22a%22);%20link.href%20=%20URL.createObjectURL(new%20Blob([JSON.stringify(object)]));%20link.download%20=%20fileName%20||%20%22network.onc%22;%20link.click().remove();%20}%20%3C/script%3E%20%3C/body%3E%20%3C/html%3E
